<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Matching continuously measured fluxes with measurement IDs and meta data — flux_match • fluxible</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Matching continuously measured fluxes with measurement IDs and meta data — flux_match"><meta name="description" content="Matching a dataframe of continuously measured
gas concentration data with measurement metadata from another dataframe.
Measurements are paired with their metadata based on datetime.
Extra variables in both dataframes are kept in the output."><meta property="og:description" content="Matching a dataframe of continuously measured
gas concentration data with measurement metadata from another dataframe.
Measurements are paired with their metadata based on datetime.
Extra variables in both dataframes are kept in the output."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fluxible</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/fluxible_practical_example.html">Practical example: from raw gas concentration data to clean ecosystem gas fluxes.</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Matching continuously measured fluxes with measurement IDs and meta data</h1>

      <div class="d-none name"><code>flux_match.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Matching a dataframe of continuously measured
gas concentration data with measurement metadata from another dataframe.
Measurements are paired with their metadata based on datetime.
Extra variables in both dataframes are kept in the output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flux_match</span><span class="op">(</span></span>
<span>  <span class="va">raw_conc</span>,</span>
<span>  <span class="va">field_record</span>,</span>
<span>  startcrop <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  measurement_length <span class="op">=</span> <span class="fl">220</span>,</span>
<span>  ratio_threshold <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  time_diff <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  datetime_col <span class="op">=</span> <span class="st">"datetime"</span>,</span>
<span>  conc_col <span class="op">=</span> <span class="st">"conc"</span>,</span>
<span>  start_col <span class="op">=</span> <span class="st">"start"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-raw-conc">raw_conc<a class="anchor" aria-label="anchor" href="#arg-raw-conc"></a></dt>
<dd><p>dataframe of CO2 concentration measured continuously.
Has to contain at least a datetime column in ymd_hms format and
a gas concentration column as double.</p></dd>


<dt id="arg-field-record">field_record<a class="anchor" aria-label="anchor" href="#arg-field-record"></a></dt>
<dd><p>dataframe recording which measurement happened when.
Has to contain at least a column containing the start of each measurement,
and any other column identifying the measurements.</p></dd>


<dt id="arg-startcrop">startcrop<a class="anchor" aria-label="anchor" href="#arg-startcrop"></a></dt>
<dd><p>how many seconds should be discarded at the beginning of
the measurement</p></dd>


<dt id="arg-measurement-length">measurement_length<a class="anchor" aria-label="anchor" href="#arg-measurement-length"></a></dt>
<dd><p>length of the measurement (in seconds)
from the start specified in the field_record</p></dd>


<dt id="arg-ratio-threshold">ratio_threshold<a class="anchor" aria-label="anchor" href="#arg-ratio-threshold"></a></dt>
<dd><p>ratio (number of concentration measurement compared to
length of measurement in seconds) below which the data should be flagged as
too little</p></dd>


<dt id="arg-time-diff">time_diff<a class="anchor" aria-label="anchor" href="#arg-time-diff"></a></dt>
<dd><p>time difference (in seconds) between the two datasets.
Will be added to the datetime column of the raw_conc dataset.
For situations where the time was not synchronized correctly.</p></dd>


<dt id="arg-datetime-col">datetime_col<a class="anchor" aria-label="anchor" href="#arg-datetime-col"></a></dt>
<dd><p>datetime column in raw_conc (dmy_hms format)</p></dd>


<dt id="arg-conc-col">conc_col<a class="anchor" aria-label="anchor" href="#arg-conc-col"></a></dt>
<dd><p>concentration column in raw_conc</p></dd>


<dt id="arg-start-col">start_col<a class="anchor" aria-label="anchor" href="#arg-start-col"></a></dt>
<dd><p>start column in field_record (dmy_hms format)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a dataframe with concentration measurements, corresponding datetime,
flux ID, measurements start and end, flags in case of no data or low number
of data, and any variables present in one of the inputs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">co2_df_short</span>, <span class="va">record_short</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">flux_match</span><span class="op">(</span><span class="va">co2_df_short</span>, <span class="va">record_short</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,251 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    f_datetime          temp_air temp_soil f_conc   PAR turfID       type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-07-28 <span style="color: #949494;">23:43:35</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     447. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-07-28 <span style="color: #949494;">23:43:36</span>     7.22      10.9   447.  1.68 156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-07-28 <span style="color: #949494;">23:43:37</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     448. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-07-28 <span style="color: #949494;">23:43:38</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     449. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-07-28 <span style="color: #949494;">23:43:39</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     449. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-07-28 <span style="color: #949494;">23:43:40</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     450. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-07-28 <span style="color: #949494;">23:43:41</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     451. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-07-28 <span style="color: #949494;">23:43:42</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     451. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-07-28 <span style="color: #949494;">23:43:43</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     453. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-07-28 <span style="color: #949494;">23:43:44</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     453. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,241 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 6 more variables: f_start &lt;dttm&gt;, f_end &lt;dttm&gt;, f_fluxID &lt;fct&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   f_n_conc &lt;int&gt;, f_ratio &lt;dbl&gt;, f_flag_match &lt;chr&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joseph Gaudard, Paul Efren, Michael Mustri, Pekka O Niittynen, Richard James Telford.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

