<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Ecosystem Gas Fluxes Calculations for Closed Loop Chamber Setup • fluxible</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Ecosystem Gas Fluxes Calculations for Closed Loop Chamber Setup">
<meta name="description" content="Processes the raw data from closed loop flux chamber (or tent) setups into ecosystem gas fluxes usable for analysis. It goes from a data frame of gas concentration over time (which can contain several measurements) and a meta data file indicating which measurement was done when, to a data frame of ecosystem gas fluxes including quality diagnostics. Functions provided include different models (exponential as described in Zhao et al (2018) &lt;doi:10.1016/j.agrformet.2018.08.022&gt;, quadratic and linear) to estimate the fluxes from the raw data, quality assessment, plotting for visual check and calculation of fluxes based on the setup specific parameters (chamber size, plot area, ...).">
<meta property="og:description" content="Processes the raw data from closed loop flux chamber (or tent) setups into ecosystem gas fluxes usable for analysis. It goes from a data frame of gas concentration over time (which can contain several measurements) and a meta data file indicating which measurement was done when, to a data frame of ecosystem gas fluxes including quality diagnostics. Functions provided include different models (exponential as described in Zhao et al (2018) &lt;doi:10.1016/j.agrformet.2018.08.022&gt;, quadratic and linear) to estimate the fluxes from the raw data, quality assessment, plotting for visual check and calculation of fluxes based on the setup specific parameters (chamber size, plot area, ...).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">fluxible</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/fluxible_practical_example.html">Practical example: from raw gas concentration data to clean ecosystem gas fluxes.</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="fluxible">Fluxible<a class="anchor" aria-label="anchor" href="#fluxible"></a>
</h1></div>
<p><strong>Note:</strong> fluxible is still in an early phase, it is fully functional but can be improved in many ways. Please get in touch for any problems or suggestions.</p>
<!-- badges: start -->
<!-- badges: end -->
<p>The Fluxible R package is made to transform any dataset of gas concentration over time into a gas flux dataset. It was originally made to be used with a closed loop chamber system connected to a gas analyzer. A function for use with a tent (taking leakage into account) is in development (see further developments).</p>
<p>The goal of fluxible is to provide a workflow that removes individual evaluation of each flux, reduces risk of bias, and makes it reproducible. Users set specific data quality standards and selection parameters as function arguments that are applied to the entire dataset. The package runs the calculations automatically, without prompting the user to take decisions mid-way, and provides quality flags and plots at the end of the process for a visual check. This makes it easy to use with large flux datasets and to integrate into a reproducible workflow. Using the Fluxible R package makes the workflow reproducible, increases compatibility across studies, and is more time efficient.</p>
<p>For a quick overview of how the package works, you can look at <a href="https://github.com/Plant-Functional-Trait-Course/fluxible/blob/main/dissemination/poster_EGU24_jgaudard.pdf" class="external-link">the poster</a> that was presented at the European Geosciences Union Annual Meeting 2024.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Fluxible can be installed from CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fluxible"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of fluxible from the <a href="https://github.com/Plant-Functional-Trait-Course/fluxible" class="external-link">GitHub repo</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"plant-functional-trait-course/fluxible"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="short-example">Short example<a class="anchor" aria-label="anchor" href="#short-example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=fluxible" class="external-link">fluxible</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">conc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flux_match.html">flux_match</a></span><span class="op">(</span></span>
<span>  <span class="va">co2_df_short</span>,</span>
<span>  <span class="va">record_short</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">slopes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flux_fitting.html">flux_fitting</a></span><span class="op">(</span></span>
<span>  <span class="va">conc</span>,</span>
<span>  fit_type <span class="op">=</span> <span class="st">"exp"</span>,</span>
<span>  end_cut <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Cutting measurements...</span></span>
<span><span class="co">#&gt; Estimating starting parameters for optimization...</span></span>
<span><span class="co">#&gt; Optimizing fitting parameters...</span></span>
<span><span class="co">#&gt; Calculating fits and slopes...</span></span>
<span><span class="co">#&gt; Done.</span></span>
<span></span>
<span><span class="va">slopes_flag</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flux_quality.html">flux_quality</a></span><span class="op">(</span></span>
<span>  <span class="va">slopes</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Total number of measurements: 6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ok   6   100 %</span></span>
<span><span class="co">#&gt;  discard      0   0 %</span></span>
<span><span class="co">#&gt;  zero     0   0 %</span></span>
<span><span class="co">#&gt;  weird_flux   0   0 %</span></span>
<span><span class="co">#&gt;  start_error      0   0 %</span></span>
<span><span class="co">#&gt;  no_data      0   0 %</span></span>
<span><span class="co">#&gt;  force_ok     0   0 %</span></span>
<span></span>
<span><span class="fu"><a href="reference/flux_plot.html">flux_plot</a></span><span class="op">(</span></span>
<span>  <span class="va">slopes_flag</span>,</span>
<span>  f_ylim_lower <span class="op">=</span> <span class="fl">390</span>,</span>
<span>  f_ylim_upper <span class="op">=</span> <span class="fl">650</span>,</span>
<span>  facet_wrap_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ncol <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    scales <span class="op">=</span> <span class="st">"free"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting in progress</span></span></code></pre></div>
<p><img src="reference/figures/README-short-exemple-1.png" width="100%"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">fluxes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flux_calc.html">flux_calc</a></span><span class="op">(</span></span>
<span>  <span class="va">slopes_flag</span>,</span>
<span>  slope_col <span class="op">=</span> <span class="st">"f_slope_corr"</span>,</span>
<span>  conc_unit <span class="op">=</span> <span class="st">"ppm"</span>,</span>
<span>  flux_unit <span class="op">=</span> <span class="st">"mmol"</span>,</span>
<span>  cols_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"turfID"</span>, <span class="st">"type"</span><span class="op">)</span>,</span>
<span>  cols_ave <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temp_soil"</span>, <span class="st">"PAR"</span><span class="op">)</span>,</span>
<span>  cut_col <span class="op">=</span> <span class="st">"f_cut"</span>,</span>
<span>  keep_arg <span class="op">=</span> <span class="st">"keep"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Cutting data according to 'keep_arg'...</span></span>
<span><span class="co">#&gt; Averaging air temperature for each flux...</span></span>
<span><span class="co">#&gt; Creating a df with the columns from 'cols_keep' argument...</span></span>
<span><span class="co">#&gt; Creating a df with the columns from 'cols_ave' argument...</span></span>
<span><span class="co">#&gt; Calculating fluxes...</span></span>
<span><span class="co">#&gt; R constant set to 0.082057</span></span>
<span><span class="co">#&gt; Concentration was measured in ppm</span></span>
<span><span class="co">#&gt; Fluxes are in mmol/m2/h</span></span>
<span></span>
<span><span class="va">fluxes_gep</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flux_gep.html">flux_gep</a></span><span class="op">(</span></span>
<span>  <span class="va">fluxes</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="st">"turfID"</span>,</span>
<span>  flux_col <span class="op">=</span> <span class="st">"flux"</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"type"</span>,</span>
<span>  datetime_col <span class="op">=</span> <span class="st">"datetime"</span>,</span>
<span>  par_col <span class="op">=</span> <span class="st">"PAR"</span>,</span>
<span>  cols_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temp_soil"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in flux_gep(fluxes, id_cols = "turfID", flux_col = "flux", type_col = "type", : </span></span>
<span><span class="co">#&gt;  NEE missing for measurement turfID: 156 AN2C 156</span></span>
<span></span>
<span><span class="va">fluxes_gep</span></span>
<span><span class="co">#&gt; # A tibble: 9 × 15</span></span>
<span><span class="co">#&gt;   datetime            turfID     PAR type   flux f_fluxID temp_soil f_slope_calc</span></span>
<span><span class="co">#&gt;   &lt;dttm&gt;              &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2022-07-28 23:47:22 74 WN2C…  2.19 GEP    10.3 &lt;NA&gt;          10.7       NA    </span></span>
<span><span class="co">#&gt; 2 2022-07-28 23:59:32 109 AN3…  1.87 GEP   -27.2 &lt;NA&gt;          10.8       NA    </span></span>
<span><span class="co">#&gt; 3 2022-07-29 00:06:35 29 WN3C…  1.61 GEP    NA   &lt;NA&gt;          12.2       NA    </span></span>
<span><span class="co">#&gt; 4 2022-07-28 23:43:35 156 AN2…  1.88 ER     47.7 1             10.8        0.775</span></span>
<span><span class="co">#&gt; 5 2022-07-28 23:47:22 74 WN2C…  2.19 NEE    31.0 2             10.7        0.504</span></span>
<span><span class="co">#&gt; 6 2022-07-28 23:52:10 74 WN2C…  2.04 ER     20.7 3             10.7        0.337</span></span>
<span><span class="co">#&gt; 7 2022-07-28 23:59:32 109 AN3…  1.87 NEE    41.5 4             10.8        0.676</span></span>
<span><span class="co">#&gt; 8 2022-07-29 00:03:10 109 AN3…  1.69 ER     68.7 5             10.5        1.12 </span></span>
<span><span class="co">#&gt; 9 2022-07-29 00:06:35 29 WN3C…  1.61 NEE    26.1 6             12.2        0.425</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: chamber_volume &lt;dbl&gt;, tube_volume &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   atm_pressure &lt;dbl&gt;, plot_area &lt;dbl&gt;, temp_air_ave &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   volume_setup &lt;dbl&gt;, model &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="further-developments">Further developments<a class="anchor" aria-label="anchor" href="#further-developments"></a>
</h2>
<div class="section level3">
<h3 id="flux-tent">Flux tent<a class="anchor" aria-label="anchor" href="#flux-tent"></a>
</h3>
<p>Currently fluxible is thought for setups using a flux chamber. Flux chambers can be assumed to have no leak. As flux tents tend to leak, a different fitting function is needed to account for potential leaks.</p>
</div>
<div class="section level3">
<h3 id="more-fits">More fits<a class="anchor" aria-label="anchor" href="#more-fits"></a>
</h3>
<p>As we want fluxible to fit the use of as many projects as possible, more fitting expressions will be included in the flux_fitting function. Feel welcome to get in touch if you wish to include yours in fluxible.</p>
</div>
</div>
<div class="section level2">
<h2 id="contact">Contact<a class="anchor" aria-label="anchor" href="#contact"></a>
</h2>
<p>Joseph Gaudard, University of Bergen, Norway</p>
<p><a href="mailto:joseph.gaudard@pm.me" class="email">joseph.gaudard@pm.me</a></p>
<p><a href="https://jogaudard.github.io/CV_jgaudard/" class="external-link">CV</a></p>
</div>
<div class="section level2">
<h2 id="dissemination">Dissemination<a class="anchor" aria-label="anchor" href="#dissemination"></a>
</h2>
<p>Gaudard, J., Telford, R., Vandvik, V., and Halbritter, A. H.: Fluxible: an R package to calculate ecosystem gas fluxes in a reproducible and automated workflow., EGU General Assembly 2024, Vienna, Austria, 14–19 Apr 2024, EGU24-956, <a href="https://doi.org/10.5194/egusphere-egu24-956" class="external-link uri">https://doi.org/10.5194/egusphere-egu24-956</a>, 2024.</p>
<p><a href="https://github.com/Plant-Functional-Trait-Course/fluxible/blob/main/dissemination/poster_EGU24_jgaudard.pdf" class="external-link">Direct link to the poster</a></p>
<!-- [Link to the abstract](https://meetingorganizer.copernicus.org/EGU24/EGU24-956.html) -->
<div class="section level4">
<h4 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h4>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=fluxible" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fluxible</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Joseph Gaudard <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6989-7624" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jonas Trepel <br><small class="roles"> Author </small>  </li>
<li>Hilary Rose Dawson <br><small class="roles"> Author </small>  </li>
<li>Michael Mustri <br><small class="roles"> Author </small>  </li>
<li>Pekka O Niittynen <br><small class="roles"> Author </small>  </li>
<li>Paul Efren Santos-Andrade <br><small class="roles"> Author </small>  </li>
<li>Richard James Telford <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9826-3076" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joseph Gaudard, Jonas Trepel, Hilary Rose Dawson, Michael Mustri, Pekka O Niittynen, Paul Efren Santos-Andrade, Richard James Telford.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
